/**
 * inlineEditor v0.0.1
 *
 * A jQuery plugin that creates an inline editor. Styling with Bootstrap 3
 *
 * @link        http://github.com/nghuuphuoc/inlineEditor
 * @author      http://twitter.com/nghuuphuoc
 * @copyright   (c) 2013 Nguyen Huu Phuoc
 * @license     MIT
 */

!function(a){var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULT_OPTIONS,d),this._init()};b.DEFAULT_OPTIONS={prefixClass:"inline-editor-",method:"GET",field:"inlineEditor",data:{}},b.prototype={constructor:b,_init:function(){var b=this.options.prefixClass,c=this.$element.wrap(a("<div/>").addClass(b+"wrapper")).parent(),d=a("<div/>").addClass(b+"container form-inline").appendTo(c).hide(),e=a("<input/>").addClass(b+"input form-control").appendTo(d),f=a("<button/>").addClass(b+"save btn btn-success").attr("type","button").html('<i class="fa fa-check"></i>').appendTo(d),g=a("<button/>").addClass(b+"cancel btn btn-default").attr("type","button").html('<i class="fa fa-times"></i>').appendTo(d),h=d.width()-f.outerWidth()-g.outerWidth()-parseInt(e.css("padding-left"))-parseInt(e.css("padding-right"));e.addClass("form-control").css("width",h+"px");var i=this;f.on("click",function(){f.attr("disabled","disabled").find("i").removeClass("fa-check").addClass("fa-spin fa-refresh");var b=i.options.data,c=e.val();b[i.options.field]=c,a.ajax({url:i.options.url,method:i.options.method,data:b}).success(function(a){("true"==a.success||1==a.success)&&i.$element.html(c),f.removeAttr("disabled").find("i").removeClass("fa-spin fa-refresh").addClass("fa-check")})}),g.on("click",function(){i.$element.show(),d.hide()}),this.$element.on("click",function(){i.$element.hide(),d.show(),e.val(i.$element.html())})}},a.fn.inlineEditor=function(c){return this.each(function(){var d=a(this),e=d.data("inlineEditor");e||d.data("inlineEditor",e=new b(this,c))})},a.fn.inlineEditor.Constructor=b}(window.jQuery);